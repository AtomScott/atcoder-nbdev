---

title: Title


keywords: fastai
sidebar: home_sidebar



nb_path: "competition_notebook/Atom/abc199/abc199.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: competition_notebook/Atom/abc199/abc199.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 style='text-align: center'>abc199</h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A---Square-Inequality">A - Square Inequality<a class="anchor-link" href="#A---Square-Inequality"> </a></h2><hr>
<p>配点 : $100$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>整数 $A, B, C$ が与えられます。<br/>
$A^2 + B^2 &amp;lt; C^2$ かを判定してください。</p>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$0 \le A \le 1000$</li>
<li>$0 \le B \le 1000$</li>
<li>$0 \le C \le 1000$</li>
<li>$A, B, C$ は整数である</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$A$ $B$ $C$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>$A^2 + B^2 &amp;lt; C^2$ なら <code>Yes</code> を、そうでないなら <code>No</code> を出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>2 2 4</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>Yes</code></pre>
<p>$A^2 + B^2 = 2^2 + 2^2 = 8$ 、$C^2 = 4^2 = 16$ より $A^2 + B^2 &amp;lt; C^2$ なので <code>Yes</code> を出力します。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>10 10 10</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>No</code></pre>
<p>$A^2 + B^2 = 200$ 、$C^2 = 100$ なので $A^2 + B^2 &amp;lt; C^2$ ではありません。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-3">&#20837;&#21147;&#20363; 3<a class="anchor-link" href="#&#20837;&#21147;&#20363;-3"> </a></h3>
<pre><code>3 4 5</code></pre>
<h3 id="&#20986;&#21147;&#20363;-3">&#20986;&#21147;&#20363; 3<a class="anchor-link" href="#&#20986;&#21147;&#20363;-3"> </a></h3>
<pre><code>No</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> A/main.py
<span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">YES</span> <span class="o">=</span> <span class="s2">&quot;Yes&quot;</span>  <span class="c1"># type: str</span>
<span class="n">NO</span> <span class="o">=</span> <span class="s2">&quot;No&quot;</span>  <span class="c1"># type: str</span>


<span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">A</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">B</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">C</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">A</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">B</span><span class="o">**</span><span class="mi">2</span> <span class="o">&lt;</span> <span class="n">C</span><span class="o">**</span><span class="mi">2</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">YES</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">NO</span><span class="p">)</span>
    <span class="k">return</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">iterate_tokens</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">word</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">iterate_tokens</span><span class="p">()</span>
    <span class="n">A</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>  <span class="c1"># type: int</span>
    <span class="n">B</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>  <span class="c1"># type: int</span>
    <span class="n">C</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>  <span class="c1"># type: int</span>
    <span class="n">solve</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Overwriting A/main.py
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d A -e A/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 36 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 26 ms
# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 43 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d A -e A/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
2021-04-24 21:15:56,003 INFO: Loaded session from /home/me/.local/share/atcoder-tools/cookie.txt
2021-04-24 21:15:56,353 INFO: Successfully Logged in using the previous session cache.
2021-04-24 21:15:56,353 INFO: If you&#39;d like to invalidate the cache, delete /home/me/.local/share/atcoder-tools/cookie.txt.
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 42 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 38 ms
# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 31 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
2021-04-24 21:15:56,683 INFO: Submitting A/main.py as python
2021-04-24 21:15:57,065 INFO: <span class="ansi-green-intense-fg">Done!</span> https://atcoder.jp/contests/abc199/submissions/22008167
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="B---Intersection">B - Intersection<a class="anchor-link" href="#B---Intersection"> </a></h2><hr>
<p>配点 : $200$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>長さ $N$ の数列 $A = (A_1, A_2, A_3, \dots, A_N), B = (B_1, B_2, B_3, \dots, B_N)$ が与えられます。<br/>
以下の条件を満たす整数 $x$ の個数を求めてください。</p>
<ul>
<li>$1 \le i \le N$ を満たす全ての整数 $i$ について $A_i \le x \le B_i$</li>
</ul>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$1 \le N \le 100$</li>
<li>$1 \le A_i \le B_i \le 1000$</li>
<li>入力に含まれる値は全て整数</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$N$
$A_1$ $A_2$ $A_3$ $\dots$ $A_N$
$B_1$ $B_2$ $B_3$ $\dots$ $B_N$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>答えを出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>2
3 2
7 5</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>3</code></pre>
<p>$x$ は $3 \le x \le 7$ と $2 \le x \le 5$ の両方を満たさなければなりません。<br/>
そのような整数 $x$ は $3, 4, 5$ の $3$ 個あります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>3
1 5 3
10 7 3</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>0</code></pre>
<p>条件を満たす整数 $x$ が存在しないこともあります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-3">&#20837;&#21147;&#20363; 3<a class="anchor-link" href="#&#20837;&#21147;&#20363;-3"> </a></h3>
<pre><code>3
3 2 5
6 9 8</code></pre>
<h3 id="&#20986;&#21147;&#20363;-3">&#20986;&#21147;&#20363; 3<a class="anchor-link" href="#&#20986;&#21147;&#20363;-3"> </a></h3>
<pre><code>2</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> B/main.py
<span class="ch">#!/usr/bin/env python3</span>
<span class="kn">import</span> <span class="nn">sys</span>


<span class="k">def</span> <span class="nf">solve</span><span class="p">(</span><span class="n">N</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">A</span><span class="p">:</span> <span class="s2">&quot;List[int]&quot;</span><span class="p">,</span> <span class="n">B</span><span class="p">:</span> <span class="s2">&quot;List[int]&quot;</span><span class="p">):</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1001</span><span class="p">):</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">a</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">b</span><span class="p">):</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
    <span class="k">return</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">iterate_tokens</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
                <span class="k">yield</span> <span class="n">word</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="n">iterate_tokens</span><span class="p">()</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span>  <span class="c1"># type: int</span>
    <span class="n">A</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>  <span class="c1"># type: &quot;List[int]&quot;</span>
    <span class="n">B</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">tokens</span><span class="p">))</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>  <span class="c1"># type: &quot;List[int]&quot;</span>
    <span class="n">solve</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Overwriting B/main.py
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d B -e B/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 33 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 34 ms
# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 33 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d B -e B/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
2021-04-24 21:19:30,861 INFO: Loaded session from /home/me/.local/share/atcoder-tools/cookie.txt
2021-04-24 21:19:31,201 INFO: Successfully Logged in using the previous session cache.
2021-04-24 21:19:31,201 INFO: If you&#39;d like to invalidate the cache, delete /home/me/.local/share/atcoder-tools/cookie.txt.
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 34 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 33 ms
# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 31 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
2021-04-24 21:19:31,504 INFO: Submitting B/main.py as python
2021-04-24 21:19:31,864 INFO: <span class="ansi-green-intense-fg">Done!</span> https://atcoder.jp/contests/abc199/submissions/22010003
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="C---IPFL">C - IPFL<a class="anchor-link" href="#C---IPFL"> </a></h2><hr>
<p>配点 : $300$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>長さ $2N$ の文字列 $S$ があります。<br/>
この文字列に対して $Q$ 個のクエリが与えられます。$i$ 番目のクエリでは $3$ つの整数 $T_i, A_i, B_i$ が与えられるので、以下の処理をします。</p>
<ul>
<li>$T_i = 1$ のとき : $S$ の $A_i$ 文字目と $B_i$ 文字目を入れ替える<li>$T_i = 2$ のとき : $S$ の前半 $N$ 文字と後半 $N$ 文字を入れ替える($A_i, B_i$ の値は用いない)<br/>
  例えば $S$ が `FLIP` のときにこのクエリを処理すると、$S$ は `IPFL` となる。</li></li>
</ul>
<p>これら $Q$ 個のクエリを与えられた順に全て処理した後の $S$ を出力してください。</p>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$1 \le N \le 2 \times 10^5$</li>
<li>$S$ は長さ $2N$ の英大文字のみからなる文字列</li>
<li>$1 \le Q \le 3 \times 10^5$</li>
<li>$T_i$ は $1$ または $2$</li>
<li>$T_i = 1$ のとき、$1 \le A_i \lt B_i \le 2N$</li>
<li>$T_i = 2$ のとき、$A_i = B_i = 0$</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$N$
$S$
$Q$
$T_1$ $A_1$ $B_1$
$T_2$ $A_2$ $B_2$
$T_3$ $A_3$ $B_3$
$\hspace{21pt} \vdots$
$T_Q$ $A_Q$ $B_Q$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>クエリ処理後の $S$ を出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>2
FLIP
2
2 0 0
1 1 4</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>LPFI</code></pre>
<p>$1$ 番目のクエリでは $S$ の前半 $N$ 文字と後半 $N$ 文字を入れ替えるため、$S$ は <code>IPFL</code> となります。<br/>
$2$ 番目のクエリでは $S$ の $1$ 文字目と $4$ 文字目を入れ替えるため、$S$ は <code>LPFI</code> となります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>2
FLIP
6
1 1 3
2 0 0
1 1 2
1 2 3
2 0 0
1 1 4</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>ILPF</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> C/main.py
<span class="ch">#!/usr/bin/env python3</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
    <span class="c1"># Failed to predict input format</span>
    <span class="n">S1</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">[:</span><span class="n">N</span><span class="p">])</span>
    <span class="n">S2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">S</span><span class="p">[</span><span class="n">N</span><span class="p">:])</span>
    <span class="n">flip</span> <span class="o">=</span> <span class="kc">False</span>
    
    <span class="k">for</span> <span class="n">t</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">b</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">:</span>
                <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="p">],</span> <span class="n">S1</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">S1</span><span class="p">[</span><span class="n">b</span><span class="p">],</span> <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">N</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&gt;=</span> <span class="n">N</span><span class="p">:</span>
                <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="p">],</span> <span class="n">S2</span><span class="p">[</span><span class="n">b</span><span class="o">-</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">S2</span><span class="p">[</span><span class="n">b</span><span class="o">-</span><span class="n">N</span><span class="p">],</span> <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="n">N</span> <span class="ow">and</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">:</span>
                <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">N</span><span class="p">],</span> <span class="n">S2</span><span class="p">[</span><span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="n">S2</span><span class="p">[</span><span class="n">N</span><span class="p">],</span> <span class="n">S1</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">N</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">S2</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">N</span><span class="p">],</span> <span class="n">S2</span><span class="p">[</span><span class="n">b</span><span class="o">-</span><span class="n">N</span><span class="p">]</span> <span class="o">=</span> <span class="n">S2</span><span class="p">[</span><span class="n">b</span><span class="o">-</span><span class="n">N</span><span class="p">],</span> <span class="n">S2</span><span class="p">[</span><span class="n">a</span><span class="o">-</span><span class="n">N</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">S1</span><span class="p">,</span> <span class="n">S2</span> <span class="o">=</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S1</span>
            
<span class="c1">#         print(S1, S2)</span>
<span class="c1">#             flip=not flip</span>
<span class="c1">#         print(t,a, b, S1+S2)</span>
<span class="c1">#     if flip:</span>
<span class="c1">#         print(&#39;&#39;.join(S1+S2))</span>
<span class="c1">#     else:</span>
<span class="c1">#         print(&#39;&#39;.join(S2+S1))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">S1</span><span class="o">+</span><span class="n">S2</span><span class="p">))</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">N</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    <span class="n">S</span> <span class="o">=</span> <span class="nb">input</span><span class="p">()</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    <span class="n">T</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">Q</span><span class="p">):</span>
        <span class="n">t</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
        <span class="n">T</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">A</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
        <span class="n">B</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
    <span class="n">main</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Overwriting C/main.py
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d C -e C/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 32 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 28 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d C -e C/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
2021-04-24 21:43:41,126 INFO: Loaded session from /home/me/.local/share/atcoder-tools/cookie.txt
2021-04-24 21:43:41,477 INFO: Successfully Logged in using the previous session cache.
2021-04-24 21:43:41,477 INFO: If you&#39;d like to invalidate the cache, delete /home/me/.local/share/atcoder-tools/cookie.txt.
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 33 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 27 ms
<span class="ansi-green-intense-fg">Passed all test cases!!!</span>
2021-04-24 21:43:41,769 INFO: Submitting C/main.py as python
2021-04-24 21:43:42,167 INFO: <span class="ansi-green-intense-fg">Done!</span> https://atcoder.jp/contests/abc199/submissions/22019273
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="D---RGB-Coloring-2">D - RGB Coloring 2<a class="anchor-link" href="#D---RGB-Coloring-2"> </a></h2><hr>
<p>配点 : $400$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>$N$ 頂点 $M$ 辺の単純無向グラフがあります。頂点には $1$ から $N$ までの、辺には $1$ から $M$ までの番号がついています。<br/>
辺 $i$ は頂点 $A_i$ と頂点 $B_i$ を結んでいます。<br/>
このグラフの各頂点を赤、緑、青の $3$ 色のいずれかで塗る方法であって、以下の条件を満たすものの数を求めてください。</p>
<ul>
<li>辺で直接結ばれている $2$ 頂点は必ず異なる色で塗られている</li>
</ul>
<p>なお、使われない色があっても構いません。</p>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$1 \le N \le 20$</li>
<li>$0 \le M \le \frac{N(N - 1)}{2}$</li>
<li>$1 \le A_i \le N$</li>
<li>$1 \le B_i \le N$</li>
<li>与えられるグラフは単純 (多重辺や自己ループを含まない)</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$N$ $M$
$A_1$ $B_1$
$A_2$ $B_2$
$A_3$ $B_3$
$\hspace{15pt} \vdots$
$A_M$ $B_M$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>答えを出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>3 3
1 2
2 3
3 1</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>6</code></pre>
<p>頂点 $1, 2, 3$ の色をそれぞれ $c_1, c_2, c_3$ とし、赤、緑、青をそれぞれ <code>R</code>, <code>G</code>, <code>B</code> で表すと、以下の $6$ 通りが条件を満たします。</p>
<ul>
<li>$c_1c_2c_3 = $ <code>RGB</code></li>
<li>$c_1c_2c_3 = $ <code>RBG</code></li>
<li>$c_1c_2c_3 = $ <code>GRB</code></li>
<li>$c_1c_2c_3 = $ <code>GBR</code></li>
<li>$c_1c_2c_3 = $ <code>BRG</code></li>
<li>$c_1c_2c_3 = $ <code>BGR</code></li>
</ul>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>3 0</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>27</code></pre>
<p>辺がないため、各頂点の色を自由に決めることができます。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-3">&#20837;&#21147;&#20363; 3<a class="anchor-link" href="#&#20837;&#21147;&#20363;-3"> </a></h3>
<pre><code>4 6
1 2
2 3
3 4
2 4
1 3
1 4</code></pre>
<h3 id="&#20986;&#21147;&#20363;-3">&#20986;&#21147;&#20363; 3<a class="anchor-link" href="#&#20986;&#21147;&#20363;-3"> </a></h3>
<pre><code>0</code></pre>
<p>条件を満たす塗り方が存在しない場合もあります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-4">&#20837;&#21147;&#20363; 4<a class="anchor-link" href="#&#20837;&#21147;&#20363;-4"> </a></h3>
<pre><code>20 0</code></pre>
<h3 id="&#20986;&#21147;&#20363;-4">&#20986;&#21147;&#20363; 4<a class="anchor-link" href="#&#20986;&#21147;&#20363;-4"> </a></h3>
<pre><code>3486784401</code></pre>
<p>答えは $32$ ビット符号付き整数型に収まらないことがあります。</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> D/main.py
<span class="ch">#!/usr/bin/env python3</span>
<span class="c1"># A class to represent a graph object</span>
<span class="k">class</span> <span class="nc">Graph</span><span class="p">:</span>
    <span class="c1"># Constructor</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">N</span><span class="p">):</span>
 
        <span class="c1"># A list of lists to represent an adjacency list</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adjList</span> <span class="o">=</span> <span class="p">[[]</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
        
        <span class="c1"># add edges to the undirected graph</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">)</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">adjList</span><span class="p">[</span><span class="n">src</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">dest</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">adjList</span><span class="p">[</span><span class="n">dest</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
 
 

<span class="c1"># Function to check if it is safe to assign color `c` to vertex `v`</span>
<span class="k">def</span> <span class="nf">isSafe</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">seen</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">color</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">seen</span><span class="p">[</span><span class="n">color</span><span class="p">]</span><span class="o">=</span><span class="kc">True</span>
        <span class="k">return</span> 
    <span class="c1"># check the color of every adjacent vertex of `v`</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">adjList</span><span class="p">[</span><span class="n">v</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">color</span><span class="p">[</span><span class="n">u</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="kc">True</span>
 

<span class="k">def</span> <span class="nf">kColorable</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
 
    <span class="c1"># if all colors are assigned, print the solution</span>
    <span class="k">if</span> <span class="n">v</span> <span class="o">==</span> <span class="n">N</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="n">count</span>
 
    <span class="c1"># try all possible combinations of available colors</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="c1"># if it is safe to assign color `c` to vertex `v`</span>
        <span class="k">if</span> <span class="n">isSafe</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
            <span class="c1"># assign color `c` to vertex `v`</span>
            <span class="n">color</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
 
            <span class="c1"># recur for the next vertex</span>
            <span class="n">count</span> <span class="o">=</span> <span class="n">kColorable</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
            <span class="c1"># backtrack</span>
            <span class="n">color</span><span class="p">[</span><span class="n">v</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">count</span> 
 
<span class="k">global</span> <span class="n">seen</span> 
<span class="n">seen</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
  
    <span class="c1"># A list to store colors (10–colorable graph)</span>
    <span class="n">COLORS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;R&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">]</span>
 
    <span class="c1"># Set number of vertices in the graph</span>
    <span class="n">N</span><span class="p">,</span> <span class="n">M</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">M</span><span class="p">):</span>
        <span class="n">edges</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">())))</span>
        <span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
 
    <span class="c1"># build a graph from the given edges</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span>
 
    <span class="n">k</span> <span class="o">=</span> <span class="mi">3</span>
 
    <span class="n">color</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span> <span class="o">*</span> <span class="n">N</span>
 
    <span class="c1"># print all k–colorable configurations of the graph</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">kColorable</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Overwriting D/main.py
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d D -e D/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
# in_1.txt ... <span class="ansi-red-intense-fg">WA</span>
<span class="ansi-magenta-intense-fg">[Input]</span>
3 3
1 2
2 3
3 1
<span class="ansi-magenta-intense-fg">[Expected]</span>
6
<span class="ansi-magenta-intense-fg">[Received]</span>
0


# in_2.txt ... <span class="ansi-red-intense-fg">WA</span>
<span class="ansi-magenta-intense-fg">[Input]</span>
3 0
<span class="ansi-magenta-intense-fg">[Expected]</span>
27
<span class="ansi-magenta-intense-fg">[Received]</span>
0


# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 28 ms
# in_4.txt ... <span class="ansi-red-intense-fg">WA</span>
<span class="ansi-magenta-intense-fg">[Input]</span>
20 0
<span class="ansi-magenta-intense-fg">[Expected]</span>
3486784401
<span class="ansi-magenta-intense-fg">[Received]</span>
0


<span class="ansi-red-intense-fg">Some cases FAILED</span> (passed 1 of 4)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d D -e D/main.py
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-yellow-fg">The latest version 2.2.0 is available! (The current version: 1.1.7.1)
To upgrade, run the following command:

pip3 install atcoder-tools --upgrade
</span>
2021-04-24 22:18:32,146 INFO: Loaded session from /home/me/.local/share/atcoder-tools/cookie.txt
2021-04-24 22:18:32,531 INFO: Successfully Logged in using the previous session cache.
2021-04-24 22:18:32,531 INFO: If you&#39;d like to invalidate the cache, delete /home/me/.local/share/atcoder-tools/cookie.txt.
# in_1.txt ... <span class="ansi-green-intense-fg">PASSED</span> 32 ms
# in_2.txt ... <span class="ansi-green-intense-fg">PASSED</span> 29 ms
# in_3.txt ... <span class="ansi-green-intense-fg">PASSED</span> 34 ms
Traceback (most recent call last):
  File &#34;/home/me/anaconda3/bin/atcoder-tools&#34;, line 8, in &lt;module&gt;
    sys.exit(main())
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/atcoder_tools.py&#34;, line 61, in main
    exit_program(submit_main(prog, args))
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/tools/submit.py&#34;, line 102, in main
    if args.force or tester.main(&#34;&#34;, tester_args):
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/tools/tester.py&#34;, line 334, in main
    return run_all_tests(exec_file, in_sample_file_list, out_sample_file_list, args.timeout, args.knock_out,
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/tools/tester.py&#34;, line 202, in run_all_tests
    test_summary = run_for_samples(
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/tools/tester.py&#34;, line 118, in run_for_samples
    has_error_output = has_error_output or exec_res.has_stderr()
  File &#34;/home/me/anaconda3/lib/python3.8/site-packages/atcodertools/executils/run_program.py&#34;, line 30, in has_stderr
    return len(self.stderr) &gt; 0
TypeError: object of type &#39;NoneType&#39; has no len()
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="E---Permutation">E - Permutation<a class="anchor-link" href="#E---Permutation"> </a></h2><hr>
<p>配点 : $500$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>$(1, 2, 3, \dots, N)$ を並び替えてできる数列 $a$ であって、以下の条件を満たすものの数を出力してください。</p>
<ul>
<li>$1 \le i \le M$ を満たす全ての整数 $i$ について、$a_1, a_2, a_3, \dots, a_{X_i}$ の中に $Y_i$ 以下の数は $Z_i$ 個以下しか存在しない</li>
</ul>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$2 \le N \le 18$</li>
<li>$0 \le M \le 100$</li>
<li>$1 \le X_i \lt N$</li>
<li>$1 \le Y_i \lt N$</li>
<li>$0 \le Z_i \lt N$</li>
<li>入力に含まれる値は全て整数である</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$N$ $M$
$X_1$ $Y_1$ $Z_1$
$X_2$ $Y_2$ $Z_2$
$X_3$ $Y_3$ $Z_3$
$\hspace{23pt} \vdots$
$X_M$ $Y_M$ $Z_M$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>答えを出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>3 1
2 2 1</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>4</code></pre>
<p>条件を満たす $a$ は以下の $4$ つです。</p>
<ul>
<li>$(1, 3, 2)$</li>
<li>$(2, 3, 1)$</li>
<li>$(3, 1, 2)$</li>
<li>$(3, 2, 1)$</li>
</ul>
<p>$(1, 2, 3)$ や $(2, 1, 3)$ は、$a_1, a_2$ の中に $2$ 以下の数が $2$ つあるため条件を満たしません。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>5 2
3 3 2
4 4 3</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>90</code></pre>
<hr>
<h3 id="&#20837;&#21147;&#20363;-3">&#20837;&#21147;&#20363; 3<a class="anchor-link" href="#&#20837;&#21147;&#20363;-3"> </a></h3>
<pre><code>18 0</code></pre>
<h3 id="&#20986;&#21147;&#20363;-3">&#20986;&#21147;&#20363; 3<a class="anchor-link" href="#&#20986;&#21147;&#20363;-3"> </a></h3>
<pre><code>6402373705728000</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> E/main.py
<span class="ch">#!/usr/bin/env python3</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Failed to predict input format</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d E -e E/main.py
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d E -e E/main.py
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="F---Graph-Smoothing">F - Graph Smoothing<a class="anchor-link" href="#F---Graph-Smoothing"> </a></h2><hr>
<p>配点 : $600$ 点</p>
<h3 id="&#21839;&#38988;&#25991;">&#21839;&#38988;&#25991;<a class="anchor-link" href="#&#21839;&#38988;&#25991;"> </a></h3><p>$N$ 頂点 $M$ 辺の単純無向グラフがあります。頂点には $1$ から $N$ までの、辺には $1$ から $M$ までの番号がついています。<br/>
辺 $i$ は頂点 $X_i$ と頂点 $Y_i$ を結んでいます。また、頂点 $i$ には最初整数 $A_i$ が書かれています。<br/>
あなたは $K$ 回にわたって以下の操作を行います。</p>
<ul>
<li>$M$ 本ある辺の中から、一様ランダムかつ他の選択と独立に $1$ 本選ぶ。その辺が結ぶ $2$ 頂点に書かれている数の平均を $x$ として、その $2$ 頂点に書かれている数を両方 $x$ で置き換える。  </li>
</ul>
<p>各頂点 $i$ について、$K$ 回の操作後に頂点 $i$ に書かれている数の期待値を求め、注記の通り $\bmod (10^9 + 7)$ で出力してください。</p>
<h3 id="&#27880;&#35352;">&#27880;&#35352;<a class="anchor-link" href="#&#27880;&#35352;"> </a></h3><p>有理数を出力する際は、まずその有理数を分数 $\frac{y}{x}$ として表してください。<br/>
ここで、$x,y$ は整数であり、$x$ は $10^9+7$ で割り切れてはなりません (この問題の制約下で、そのような表現は必ず可能です)。<br/>
そして、$xz \equiv y \pmod {10^9+7}$ を満たすような $0$ 以上 $10^9+6$ 以下の唯一の整数 $z$ を出力してください。</p>
<h3 id="&#21046;&#32004;">&#21046;&#32004;<a class="anchor-link" href="#&#21046;&#32004;"> </a></h3><ul>
<li>$2 \le N \le 100$</li>
<li>$1 \le M \le \frac{N(N - 1)}{2}$</li>
<li>$0 \le K \le 10^9$</li>
<li>$0 \le A_i \le 10^9$</li>
<li>$1 \le X_i \le N$</li>
<li>$1 \le Y_i \le N$</li>
<li>与えられるグラフは単純</li>
<li>入力に含まれる値は全て整数である</li>
</ul>
<hr>
<h3 id="&#20837;&#21147;">&#20837;&#21147;<a class="anchor-link" href="#&#20837;&#21147;"> </a></h3><p>入力は以下の形式で標準入力から与えられる。</p>

<pre><code>$N$ $M$ $K$
$A_1$ $A_2$ $A_3$ $\dots$ $A_N$
$X_1$ $Y_1$
$X_2$ $Y_2$
$X_3$ $Y_3$
$\hspace{15pt} \vdots$
$X_M$ $Y_M$</code></pre>
<h3 id="&#20986;&#21147;">&#20986;&#21147;<a class="anchor-link" href="#&#20986;&#21147;"> </a></h3><p>$N$ 行にわたって出力せよ。<br/>
$i$ 行目には、$K$ 回の操作後に頂点 $i$ に書かれている数の期待値を、注記に従って $\bmod (10^9 + 7)$ で出力せよ。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-1">&#20837;&#21147;&#20363; 1<a class="anchor-link" href="#&#20837;&#21147;&#20363;-1"> </a></h3>
<pre><code>3 2 1
3 1 5
1 2
1 3</code></pre>
<h3 id="&#20986;&#21147;&#20363;-1">&#20986;&#21147;&#20363; 1<a class="anchor-link" href="#&#20986;&#21147;&#20363;-1"> </a></h3>
<pre><code>3
500000005
500000008</code></pre>
<ul>
<li>唯一の操作で辺 $1$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $2, 2, 5$ となります</li>
<li>唯一の操作で辺 $2$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $4, 1, 4$ となります</li>
</ul>
<p>従って、操作後に頂点 $1, 2, 3$ に書かれている数の期待値はそれぞれ $3, \frac{3}{2}, \frac{9}{2}$ となります。<br/>
これらを注記に従って $\bmod (10^9 + 7)$ の表現に変換すると、それぞれ $3, 500000005, 500000008$ となります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-2">&#20837;&#21147;&#20363; 2<a class="anchor-link" href="#&#20837;&#21147;&#20363;-2"> </a></h3>
<pre><code>3 2 2
12 48 36
1 2
1 3</code></pre>
<h3 id="&#20986;&#21147;&#20363;-2">&#20986;&#21147;&#20363; 2<a class="anchor-link" href="#&#20986;&#21147;&#20363;-2"> </a></h3>
<pre><code>750000036
36
250000031</code></pre>
<p><li>$1$ 回目の操作で辺 $1$ が選ばれた場合<br/>
    頂点 $1, 2, 3$ に書かれている数はそれぞれ $30, 30, 36$ となります  <ul></p>
<ul>
<li>$2$ 回目の操作で辺 $1$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $30, 30, 36$ となります  </li>
<li><p>$2$ 回目の操作で辺 $2$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $33, 30, 33$ となります</p>
</li>
<li><p>$2$ 回目の操作で辺 $1$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $36, 36, 24$ となります</p>
</li>
<li>$2$ 回目の操作で辺 $2$ が選ばれた場合 : 頂点 $1, 2, 3$ に書かれている数はそれぞれ $24, 48, 24$ となります  </li>
</ul>
<p>これら $4$ 通りのケースが各 $\frac{1}{4}$ の確率で起こるので、頂点 $1, 2, 3$ に最終的に書かれている数の期待値はそれぞれ $\frac{123}{4}, \frac{144}{4} (=36), \frac{117}{4}$ となります。</p>
<hr>
<h3 id="&#20837;&#21147;&#20363;-3">&#20837;&#21147;&#20363; 3<a class="anchor-link" href="#&#20837;&#21147;&#20363;-3"> </a></h3>
<pre><code>4 5 1000
578 173 489 910
1 2
2 3
3 4
4 1
1 3</code></pre>
<h3 id="&#20986;&#21147;&#20363;-3">&#20986;&#21147;&#20363; 3<a class="anchor-link" href="#&#20986;&#21147;&#20363;-3"> </a></h3>
<pre><code>201113830
45921509
67803140
685163678</code></pre>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%writefile</span> F/main.py
<span class="ch">#!/usr/bin/env python3</span>

<span class="n">MOD</span> <span class="o">=</span> <span class="mi">1000000007</span>  <span class="c1"># type: int</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="c1"># Failed to predict input format</span>
    <span class="k">pass</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools <span class="nb">test</span> -d F -e F/main.py
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>atcoder-tools submit -u -d F -e F/main.py
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

